<?xml version="1.0" encoding="UTF-8"?>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.redhat.fuse</groupId>
  <artifactId>fuse-build-yaml</artifactId>
  <version>7.2.0.redhat-SNAPSHOT</version>
  <packaging>pom</packaging>
  <name>Fuse Build YAML</name>
  <description>Fuse Build YAML descriptor generator</description>
 
   <licenses>
        <license>
            <name>The Apache Software License, Version 2.0</name>
            <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
            <distribution>repo</distribution>
        </license>
    </licenses>

  <prerequisites>
    <maven>3.3.3</maven>
  </prerequisites>

  <properties>
    <version.fuse.prefix>7.2.0</version.fuse.prefix>
    <build.number>1</build.number>
    <spring-boot.version>1.5.13.RELEASE</spring-boot.version>
    <version.camel>2.21.0.fuse-000096</version.camel>
    <version.camel.extra>2.21.0.fuse-000073</version.camel.extra>
    <version.cxf>3.1.11.fuse-000265</version.cxf>
    <version.fabric8>3.0.8.fuse-000051</version.fabric8>
    <version.fabric8.maven.plugin>3.5.33.fuse-000075</version.fabric8.maven.plugin>
    <version.bom.fuse>7.0.1.fuse-000002</version.bom.fuse>
    <version.karaf>4.2.0.fuse-000262</version.karaf>
    <version.bom.wildfly.camel>5.1.0.fuse-000071</version.bom.wildfly.camel>
    <version.fusesource.camel.sap>7.0.1.fuse-000002</version.fusesource.camel.sap>
    <karaf.plugin.version>4.2.0.fuse-000262</karaf.plugin.version>

    <application-templates.version>2.1.fuse-000091</application-templates.version>
    <fuse-bom.version>7.1.0.fuse-000005</fuse-bom.version>
    <version.hawtio>2.0.0.fuse-000186</version.hawtio>
    <version.hawtio.online>1.0.0.fuse-000054</version.hawtio.online>
    <version.hawtio.integration>1.0.0.fuse-000034</version.hawtio.integration>

    <version.kubernetes.model>2.0.9.fuse-000020</version.kubernetes.model>
    <version.kubernetes.client>3.0.3.fuse-000056</version.kubernetes.client>

    <version.application.templates>2.1.fuse-000087</version.application.templates>
    <version.cxf.xjc-utils>3.1.1.fuse-000118</version.cxf.xjc-utils>
    <version.ipaas.quickstarts>2.2.0.fuse-000098</version.ipaas.quickstarts>
    <version.spring-cloud-kubernetes>0.1.6.fuse-000056</version.spring-cloud-kubernetes>
    <version.wsdl2rest>0.7.0.fuse-000071</version.wsdl2rest>

    <docker.maven.plugin.version>0.23.0.fuse-000051</docker.maven.plugin.version>
    <version.fuse.patch>3.0.0.fuse-000069</version.fuse.patch>
    <version.wildfly.camel.examples>5.1.0.fuse-000047</version.wildfly.camel.examples>
    <version.fuse.eap>7.0.1.fuse-000001</version.fuse.eap>

    <!-- quickstarts -->
    <karaf-camel-amq.version>1.0.0.fuse-710004</karaf-camel-amq.version>
    <karaf-camel-log.version>1.0.0.fuse-710004</karaf-camel-log.version>
    <karaf-camel-rest-sql.version>1.0.0.fuse-710004</karaf-camel-rest-sql.version>
    <karaf-cxf-rest.version>1.0.0.fuse-710004</karaf-cxf-rest.version>
    <spring-boot-camel.version>1.0.0.fuse-710004</spring-boot-camel.version>
    <spring-boot-camel-amq.version>1.0.0.fuse-710004</spring-boot-camel-amq.version>
    <spring-boot-camel-config.version>1.0.0.fuse-710004</spring-boot-camel-config.version>
    <spring-boot-camel-drools.version>1.0.0.fuse-710004</spring-boot-camel-drools.version>
    <spring-boot-camel-infinispan.version>1.0.0.fuse-710004</spring-boot-camel-infinispan.version>
    <spring-boot-camel-rest-sql.version>1.0.0.fuse-710004</spring-boot-camel-rest-sql.version>
    <spring-boot-camel-teiid.version>1.0.0.fuse-710004</spring-boot-camel-teiid.version>
    <spring-boot-camel-xml.version>1.0.0.fuse-710004</spring-boot-camel-xml.version>
    <spring-boot-cxf-jaxrs.version>1.0.0.fuse-710004</spring-boot-cxf-jaxrs.version>
    <spring-boot-cxf-jaxws.version>1.0.0.fuse-710004</spring-boot-cxf-jaxws.version>

    <!-- Tag and SCM info -->
    <karaf.tag>1</karaf.tag>
    <karaf.scmUrl>1</karaf.scmUrl>
    <karaf.buildCommand>1</karaf.buildCommand>
    <cxf-xjc-utils.tag>1</cxf-xjc-utils.tag>
    <cxf-xjc-utils.scmUrl>1</cxf-xjc-utils.scmUrl>
    <cxf-xjc-utils.buildCommand>1</cxf-xjc-utils.buildCommand>
    <cxf.tag>1</cxf.tag>
    <cxf.scmUrl>1</cxf.scmUrl>
    <cxf.buildCommand>1</cxf.buildCommand>
    <camel.tag>1</camel.tag>
    <camel.scmUrl>1</camel.scmUrl>
    <camel.buildCommand>1</camel.buildCommand>
    <fuse-extras-distro.tag>1</fuse-extras-distro.tag>
    <fuse-extras-distro.scmUrl>1</fuse-extras-distro.scmUrl>
    <fuse-extras-distro.buildCommand>1</fuse-extras-distro.buildCommand>
    <camel-extra.tag>1</camel-extra.tag>
    <camel-extra.scmUrl>1</camel-extra.scmUrl>
    <camel-extra.buildCommand>1</camel-extra.buildCommand>
    <wsdl2rest.tag>1</wsdl2rest.tag>
    <wsdl2rest.scmUrl>1</wsdl2rest.scmUrl>
    <wsdl2rest.buildCommand>1</wsdl2rest.buildCommand>
    <fuse-components.tag>1</fuse-components.tag>
    <fuse-components.scmUrl>1</fuse-components.scmUrl>
    <fuse-components.buildCommand>1</fuse-components.buildCommand>
    <hawtio.tag>1</hawtio.tag>
    <hawtio.scmUrl>1</hawtio.scmUrl>
    <hawtio.buildCommand>1</hawtio.buildCommand>
    <hawtio-online.tag>1</hawtio-online.tag>
    <hawtio-online.scmUrl>1</hawtio-online.scmUrl>
    <hawtio-online.buildCommand>1</hawtio-online.buildCommand>
    <fuse-karaf.tag>1</fuse-karaf.tag>
    <fuse-karaf.scmUrl>1</fuse-karaf.scmUrl>
    <fuse-karaf.buildCommand>1</fuse-karaf.buildCommand>
    <kubernetes-model.tag></kubernetes-model.tag>
    <kubernetes-model.scmUrl>1</kubernetes-model.scmUrl>
    <kubernetes-model.buildCommand>1</kubernetes-model.buildCommand>
    <kubernetes-client.tag>1</kubernetes-client.tag>
    <kubernetes-client.scmUrl>1</kubernetes-client.scmUrl>
    <kubernetes-client.buildCommand>1</kubernetes-client.buildCommand>
    <spring-cloud-kubernetes.tag>1</spring-cloud-kubernetes.tag>
    <spring-cloud-kubernetes.scmUrl>1</spring-cloud-kubernetes.scmUrl>
    <spring-cloud-kubernetes.buildCommand>1</spring-cloud-kubernetes.buildCommand>
    <docker-maven-plugin.tag>1</docker-maven-plugin.tag>
    <docker-maven-plugin.scmUrl>1</docker-maven-plugin.scmUrl>
    <docker-maven-plugin.buildCommand>1</docker-maven-plugin.buildCommand>
    <narayana-spring-boot.tag>1</narayana-spring-boot.tag>
    <narayana-spring-boot.scmUrl>1</narayana-spring-boot.scmUrl>
    <narayana-spring-boot.buildCommand>1</narayana-spring-boot.buildCommand>
    <fabric8v2.tag>1</fabric8v2.tag>
    <fabric8v2.scmUrl>1</fabric8v2.scmUrl>
    <fabric8v2.buildCommand>1</fabric8v2.buildCommand>
    <fabric8-maven-plugin.tag>1</fabric8-maven-plugin.tag>
    <fabric8-maven-plugin.scmUrl>1</fabric8-maven-plugin.scmUrl>
    <fabric8-maven-plugin.buildCommand>1</fabric8-maven-plugin.buildCommand>
    <fuse-patch.tag>1</fuse-patch.tag>
    <fuse-patch.scmUrl>1</fuse-patch.scmUrl>
    <fuse-patch.buildCommand>1</fuse-patch.buildCommand>
    <wildfly-camel.tag>1</wildfly-camel.tag>
    <wildfly-camel.scmUrl>1</wildfly-camel.scmUrl>
    <wildfly-camel.buildCommand>1</wildfly-camel.buildCommand>
    <apicurito.tag>1</apicurito.tag>
    <apicurito.scmUrl>1</apicurito.scmUrl>
    <apicurito.buildCommand>1</apicurito.buildCommand>
    <redhat-fuse.tag>1</redhat-fuse.tag>
    <redhat-fuse.scmUrl>1</redhat-fuse.scmUrl>
    <redhat-fuse.buildCommand>1</redhat-fuse.buildCommand>
    <fuse-apicurito-generator.tag>1</fuse-apicurito-generator.tag>
    <fuse-apicurito-generator.scmUrl>1</fuse-apicurito-generator.scmUrl>
    <fuse-apicurito-generator.buildCommand>1</fuse-apicurito-generator.buildCommand>
    <wildfly-camel-examples.tag>1</wildfly-camel-examples.tag>
    <wildfly-camel-examples.scmUrl>1</wildfly-camel-examples.scmUrl>
    <wildfly-camel-examples.buildCommand>1</wildfly-camel-examples.buildCommand>
    <fuse-eap.tag>1</fuse-eap.tag>
    <fuse-eap.scmUrl>1</fuse-eap.scmUrl>
    <fuse-eap.buildCommand>1</fuse-eap.buildCommand>
    <ipaas-quickstarts.tag>1</ipaas-quickstarts.tag>
    <ipaas-quickstarts.scmUrl>1</ipaas-quickstarts.scmUrl>
    <ipaas-quickstarts.buildCommand>1</ipaas-quickstarts.buildCommand>
    <application-templates.tags>1</application-templates.tags>
    <application-templates.scmUrl>1</application-templates.scmUrl>
    <application-templates.buildCommand>1</application-templates.buildCommand>
  </properties>

  <build>
    <resources>
      <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
      </resource>
    </resources>

    <plugins>
      <plugin> 
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>3.0.0</version>
        <executions>
          <execution>
            <id>attach-artifacts</id>
            <phase>package</phase>
            <goals>
              <goal>attach-artifact</goal>
            </goals>
            <configuration>
              <artifacts>
                <artifact>
                  <file>target/extra-resources/build.yaml</file>
                  <type>yaml</type>
                  <classifier>yaml</classifier>
                </artifact>
                <artifact>
                  <file>target/extra-resources/release_fis_quickstarts.sh</file>
                  <type>sh</type>
                  <classifier>sh</classifier>
                </artifact>
              </artifacts>
            </configuration>
        </execution>
        <execution>
            <id>osgi-i-fi</id>
            <goals>
                <goal>regex-property</goal>
            </goals>
            <configuration>
                <name>version.karaf.osgi</name>
                <value>${version.karaf}</value>
                <regex>(\d+\.\d+\.\d)(.*)</regex>
                <replacement>$1</replacement>
                <failIfNoMatch>true</failIfNoMatch>
            </configuration>
        </execution>
        </executions>
      </plugin>

      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>3.1.0</version>
        <executions>
          <execution>
            <id>copy-resources</id>
            <phase>validate</phase>
            <goals>
              <goal>copy-resources</goal>
            </goals>
            <configuration>
              <outputDirectory>${basedir}/target/extra-resources</outputDirectory>
              <resources>          
                <resource>
                  <directory>src/main/resources</directory>
                  <filtering>true</filtering>
                </resource>
              </resources>              
            </configuration>            
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project>
